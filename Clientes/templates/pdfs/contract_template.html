{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style>
        @page { size: letter; margin: 2cm; }
        /* Fuente compatible con tildes */
        body { font-family: Helvetica, sans-serif; font-size: 10px; line-height: 1.5; color: #000; }
        
        .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #00ff9d; padding-bottom: 15px; }
        .header h2 { margin: 0; font-size: 18px; text-transform: uppercase; color: #333; }
        .header p { margin: 3px 0; font-size: 11px; color: #555; }
        
        .section-title { 
            background-color: #f4f4f4; 
            padding: 8px; 
            font-weight: bold; 
            margin-top: 20px; 
            border-left: 4px solid #00ff9d; 
            font-size: 11px; 
            text-transform: uppercase;
        }
        
        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .data-table td { padding: 6px; border-bottom: 1px solid #eee; vertical-align: top; }
        .label { font-weight: bold; color: #444; width: 35%; }
        .value { color: #000; }
        
        .clauses { margin-top: 20px; text-align: justify; }
        .clauses ol { padding-left: 20px; }
        .clauses li { margin-bottom: 10px; }
        
        .footer-text { margin-top: 40px; font-size: 9px; text-align: center; color: #777; }
        
        .signatures { margin-top: 60px; width: 100%; }
        .sig-box { width: 40%; display: inline-block; border-top: 1px solid #000; text-align: center; padding-top: 10px; vertical-align: top;}
    </style>
</head>
<body>

    <div class="header">
        <h2>CLUBHOUSE DIGITAL</h2>
        <p><strong>Giro:</strong> Centro Deportivo y Gimnasio</p>
        <p>Camino Monte Grande, Coltauco, O'Higgins</p>
        <p>Fono: +56 9 6504 9281 | Email: contacto@clubhousedigital.com</p>
        <p>Fecha de Emisión: {% now "d/m/Y" %}</p>
    </div>

    <div style="text-align: center; font-weight: bold; font-size: 14px; margin: 20px 0; text-transform: uppercase;">
        CONTRATO DE PRESTACIÓN DE SERVICIOS DEPORTIVOS N° {{ user.id|stringformat:"06d" }}
    </div>

    <div class="section-title">1. ANTECEDENTES DEL SOCIO</div>
    <table class="data-table">
        <tr>
            <td class="label">Nombre Completo:</td>
            <td class="value">{{ user.first_name|upper }} {{ user.last_name|upper }}</td>
        </tr>
        <tr>
            <td class="label">R.U.T:</td>
            <td class="value">{{ user.rut }}</td>
        </tr>
        <tr>
            <td class="label">Correo Electrónico:</td>
            <td class="value">{{ user.email }}</td>
        </tr>
        <tr>
            <td class="label">Teléfono:</td>
            <td class="value">{{ user.phone|default:"No registrado" }}</td>
        </tr>
        <tr>
            <td class="label">Fecha Nacimiento:</td>
            <td class="value">{{ user.birthdate|date:"d/m/Y" }}</td>
        </tr>
    </table>

    <div class="section-title">2. DETALLES DEL PLAN CONTRATADO</div>
    <table class="data-table">
        <tr>
            <td class="label">Nombre del Plan:</td>
            <td class="value"><strong>{{ membership.plan.name|upper }}</strong></td>
        </tr>
        <tr>
            <td class="label">Valor Pagado:</td>
            <td class="value">${{ membership.amount_paid|floatformat:0 }}</td>
        </tr>
        <tr>
            <td class="label">Vigencia:</td>
            <td class="value">Desde {{ membership.start_date|date:"d/m/Y" }} hasta {{ membership.end_date|date:"d/m/Y" }}</td>
        </tr>
        <tr>
            <td class="label">Días de Acceso:</td>
            <td class="value">{{ membership.plan.access_days }}</td>
        </tr>
        <tr>
            <td class="label">Forma de Pago:</td>
            <td class="value">{{ membership.get_payment_method_display|upper }}</td>
        </tr>
    </table>

    <div class="clauses">
        <div class="section-title">3. TÉRMINOS Y CONDICIONES</div>
        <ol>
            <li><strong>Declaración de Salud:</strong> El socio declara bajo su responsabilidad que su estado de salud es apto para la práctica de actividad física y libera a <strong>CLUBHOUSE DIGITAL</strong> de responsabilidad por cualquier lesión derivada de condiciones preexistentes no informadas o del mal uso de las instalaciones.</li>
            
            <li><strong>Uso de Instalaciones:</strong> El socio podrá hacer uso de las instalaciones y servicios ofrecidos durante los horarios de funcionamiento y según los días estipulados en su plan contratado ({{ membership.plan.access_days }}).</li>
            
            <li><strong>Acceso:</strong> El acceso al recinto es personal e intransferible mediante el uso del Código QR proporcionado en este acto. El mal uso de este código o el préstamo a terceros será causal de término inmediato del contrato.</li>
            
            <li><strong>Pagos y Devoluciones:</strong> Los servicios se pagan por anticipado. No se realizarán devoluciones de dinero por inasistencia del socio, salvo casos médicos debidamente acreditados con certificado, lo cual permitirá el congelamiento del plan según las políticas vigentes.</li>
            
            <li><strong>Normas de Convivencia:</strong> El socio se obliga a respetar las normas de higiene, seguridad y convivencia del establecimiento, incluyendo el uso de toalla, orden de los implementos y respeto hacia el personal y otros socios.</li>
            
            <li><strong>Pertenencias:</strong> <strong>CLUBHOUSE DIGITAL</strong> no se hace responsable por la pérdida, hurto o daño de objetos personales dejados en casilleros o áreas comunes. Se recomienda no asistir con objetos de alto valor.</li>
            
            <li><strong>Facultades de la Administración:</strong> La administración se reserva el derecho de admisión y permanencia, pudiendo cancelar la matrícula de quien incumpla gravemente las normas o ponga en riesgo la seguridad del recinto.</li>
        </ol>
    </div>

    <div class="signatures">
        <div class="sig-box" style="float: left;">
            <br><br>
            <strong>{{ user.get_full_name|upper }}</strong><br>
            RUT: {{ user.rut }}<br>
            SOCIO / ALUMNO
        </div>
        <div class="sig-box" style="float: right;">
            <br><br>
            <strong>ADMINISTRACIÓN</strong><br>
            CLUBHOUSE DIGITAL<br>
            COLTAUCO
        </div>
    </div>

    <div class="footer-text">
        Este documento es un comprobante válido de la contratación de servicios deportivos en ClubHouse Digital.
        <br>Generado electrónicamente el {% now "d de F de Y a las H:i" %} hrs.
    </div>

</body>
</html>